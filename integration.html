<!doctype html>
<html lang="en-US">

<head>

  <link rel="stylesheet" type="text/css" href="./css/selectfi.css">
  <link rel="stylesheet" type="text/css" href="./css/magnific-popup.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"
    integrity="sha512-IsNh5E3eYy3tr/JiX2Yx4vsCujtkhwl7SLqgnwLNgf04Hrt9BT9SXlLlZlWx+OK4ndzAoALhsMNcCmkggjZB1w=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>

<body>
  
      <button id="selectFiInt" class="selectButton" data-dealership-id="1234" data-vin="5N1AZ2DJXPC115198">
        <dl class="ddr-entry-button-cta__no-impact--xlarge">
          <dt class="ddr-entry-button-cta__text ddr-entry-button-cta__text--xlarge">
            Get Payment Now
          </dt>
          <dd class="ddr-entry-button-cta__no-impact__sub-text1--xlarge">
            No Credit Impact!
          </dd>
        </dl>
         <img alt="Pellegrino Auto Sales" class="ddr-icon ddr-entry-button__icon ddr-entry-button__icon--branded ddr-entry-button__icon--branded--xlarge" src="https://pictures.dealer.com/p/pellegrinoautosalesllc/1765/2b6cccd8cb86d360591a190d785dd9ddx.jpg"> 
      </button>
     
</body>

<script>
  $(document).ready(function () {
    $('.selectButton').click(function () {
      // Get the dealership ID and VIN from the button's data attributes
      const dealershipId = $(this).data('dealership-id');
      const vin = $(this).data('vin');

      // Generate the URL for the iframe with the dealership ID and VIN
      const iframeUrl = `http://localhost:8080/dealership-integration/?dealerid=${dealershipId}&vin=${vin}`;

      $.magnificPopup.open({
        items: {
          src: iframeUrl,
          type: 'iframe'
        },
        iframe: {
          markup: '<div class="mfp-iframe-scaler">' +
            '<div class="mfp-close"></div>' +
            '<div class="mfp-header"><div class="dLogo"><img src="images/pellegrino.jpg" alt=""/></div> <p>Get Your Payment with No Credit Impact!</p> </div>' +
            '<iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe>' +
            '</div>'
        }
      });
    });
  });
</script>

</html>
